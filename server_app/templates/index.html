<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Server - ะะตัะตะบัะธั + Arduino</title>
</head>
<body>
    <h1>๐ฏ ะะตัะตะบัะธั ัะตะปะพะฒะตะบะฐ + Arduino</h1>

    <h2>๐ ะะพัะปะตะดะฝะธะต ะบะพะพัะดะธะฝะฐัั:</h2>
    <pre id="latest"></pre>

    <h2>๐ ะกัะฐัะธััะธะบะฐ:</h2>
    <pre id="stats"></pre>

    <hr>

    <button onclick="loadData()">๐ ะะฑะฝะพะฒะธัั</button>
    <button onclick="clearCamera(1)">๐๏ธ ะัะธััะธัั ะะฐะผะตัั 1</button>
    <button onclick="clearCamera(2)">๐๏ธ ะัะธััะธัั ะะฐะผะตัั 2</button>

    <script>
        async function loadData() {
            try {
                const latest = await fetch('/api/coordinates/get_latest').then(r => r.json());
                const stats = await fetch('/api/coordinates/stats').then(r => r.json());

                document.getElementById('latest').textContent = JSON.stringify(latest, null, 2);
                document.getElementById('stats').textContent = JSON.stringify(stats, null, 2);
            } catch (error) {
                console.error('ะัะธะฑะบะฐ:', error);
            }
        }

        async function clearCamera(id) {
            try {
                await fetch(`/api/coordinates/clear/${id}`, {method: 'POST'});
                loadData();
            } catch (error) {
                console.error('ะัะธะฑะบะฐ:', error);
            }
        }

        window.onload = () => {
            loadData();
            setInterval(loadData, 1000);
        };
    </script>
</body>
</html>
